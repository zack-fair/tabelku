/*! Tabelku - v0.0.1 - 2014-12-25
* https://github.com/zack-fair/Tabelku
* Copyright (c) 2014 zack-fair; Licensed MIT */
!function(a){a.fn.tabelku=function(b){var c=arguments;return"string"!==a.type(b)&&(b=a.extend(a.fn.tabelku.defaults,b)),this.each(function(){if("string"===a.type(b))this.tabel&&this.tabel[b].apply(this.tabel,Array.prototype.slice.call(c,1));else{if(this.tabel)return;this.tabel=new LATIHAN.Tabelku(this,b)}})},a.fn.tabelku.defaults={kolom:[],data:[],checkStateChanged:a.noop,sebelumHapus:a.noop,ajaxDataUrl:"",ajaxTambahUrl:"",ajaxHapusUrl:""},a.expr[":"].tabelku=function(a){return a.tabel}}(jQuery);var LATIHAN=LATIHAN||{};!function(a){function b(){a(this.tblBody).empty(),this.jumlahBaris=0;var b=this;this.params.data.forEach(function(a){c.call(b,a)})}function c(b){var c=a("<tr/>");c.append("<td><input type='checkbox' class='checkBaris' /></td>"),this.params.kolom.forEach(function(a){c.append("<td>"+b[a.nama]+"</td>")}),this.jumlahBaris++,c.appendTo(this.tblBody)}LATIHAN.Tabelku=function(b,c){this.elem=b,this.params=c,this.jumlahBaris=0;var d=a(b);d.addClass("table table-hover"),d.wrap("<div class='table-responsive'></div>");var e=document.createElement("thead"),f=a("<tr/>");f.append("<th><input type='checkbox' id='checkSemua' class='checkBaris' /></th>"),c.kolom.forEach(function(a){f.append("<th>"+a.text+"</th>")}),e.appendChild(f[0]),d.append(e),this.tblBody=document.createElement("tbody"),d.append(this.tblBody);var g=this;d.on("click",function(b){a(b.target).hasClass("checkBaris")&&("checkSemua"===b.target.id&&g.check(-1,b.target.checked),c.checkStateChanged.call(g,b))}),this.refresh()},LATIHAN.Tabelku.prototype.refresh=function(c){var d=this;c?(d.params.data=c,b.call(d)):""===d.params.ajaxDataUrl?b.call(d):""!==d.params.ajaxDataUrl&&a.get(d.params.ajaxDataUrl,function(a){d.params.data=a,b.call(d)},"json")},LATIHAN.Tabelku.prototype.tambahBaris=function(b,d){var e=this;d=void 0!==d?d:!0,d&&""!==this.params.ajaxTambahUrl?a.ajax({url:this.params.ajaxTambahUrl,type:"POST",data:JSON.stringify(b),contentType:"application/json; charset=utf-8",success:function(){c.call(e,b)}}):c.call(e,b)},LATIHAN.Tabelku.prototype.hapusBarisTerpilih=function(){""!==this.params.hapusUrl&&a.ajax({url:this.params.ajaxHapusUrl,type:"POST",data:JSON.stringify(this.objectTerpilih()),contentType:"application/json; charset=utf-8"});var b=a(this.tblBody).find("tr").has("td input:checked");this.jumlahBaris-=b.size();var c=this.params.sebelumHapus.call(this,b);(void 0===c||c!==!1)&&b.remove()},LATIHAN.Tabelku.prototype.check=function(b,c){var d=a(this.tblBody);b>=0?d.find("tr td input").eq(b).prop("checked",c):d.find("tr td input").prop("checked",c)},LATIHAN.Tabelku.prototype.indexTerpilih=function(){for(var a=this.tblBody.children,b=[],c=0;c<a.length;c++)a[c].firstChild.firstChild.checked&&b.push(c);return b},LATIHAN.Tabelku.prototype.objectTerpilih=function(){for(var a=this.tblBody.children,b=[],c=0;c<a.length;c++)a[c].firstChild.firstChild.checked&&b.push(this.params.data[c]);return b}}(jQuery);